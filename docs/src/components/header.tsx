'use client';

import Link from 'next/link';
import { GithubIcon } from '@/icons';
import { getPreviousPathname } from './save-previous-pathname';
import { useRouter } from 'next/navigation';
import { Logo } from './logo';

export const Header = () => {
  const router = useRouter();

  return (
    <div className="relative flex w-full items-center justify-between pt-20 pb-24">
      <Link
        href="/"
        className="mr-auto flex items-center gap-12 text-xl lowercase select-none"
        style={{ fontFeatureSettings: '"ss02"' }}
        onClick={(event) => {
          if (event.shiftKey || event.altKey || event.metaKey || event.ctrlKey) {
            return;
          }

          const prev = getPreviousPathname();

          // Go back if the previous page was the homepage so that the browser can restore the scroll position
          if (prev === '/') {
            event.preventDefault();
            router.back();
          }
        }}
      >
        <Logo />
        <div className="mt-5 h-28 w-1 bg-current/20" />
        <ShadersWordmark />
      </Link>

      <Link href="https://github.com/paper-design/shaders" target="_blank" className="ml-auto hidden xs:flex">
        <GithubIcon className="size-28" />
      </Link>
    </div>
  );
};

function ShadersWordmark(props: React.ComponentProps<'svg'>) {
  return (
    <svg width="106" height="40" viewBox="0 0 106 40" fill="currentcolor" {...props}>
      <path d="M94.6322 31.2282C93.6062 31.2282 92.6847 31.0572 91.8677 30.7152C91.0697 30.3542 90.4142 29.8602 89.9012 29.2332C89.3882 28.5872 89.0367 27.8367 88.8467 26.9817L90.6422 26.4402C90.8512 27.4282 91.2882 28.1882 91.9532 28.7202C92.6372 29.2522 93.5302 29.5182 94.6322 29.5182C95.6392 29.5182 96.4467 29.2997 97.0547 28.8627C97.6627 28.4067 97.9667 27.7702 97.9667 26.9532C97.9667 26.4022 97.7957 25.9557 97.4537 25.6137C97.1307 25.2717 96.7222 25.0057 96.2282 24.8157C95.7342 24.6257 95.0692 24.4167 94.2332 24.1887C93.2262 23.9417 92.4092 23.6947 91.7822 23.4477C91.1742 23.1817 90.6517 22.7922 90.2147 22.2792C89.7777 21.7662 89.5592 21.0727 89.5592 20.1987C89.5592 19.4767 89.7587 18.8307 90.1577 18.2607C90.5567 17.6717 91.1172 17.2157 91.8392 16.8927C92.5612 16.5697 93.3782 16.4082 94.2902 16.4082C95.6582 16.4082 96.8172 16.7312 97.7672 17.3772C98.7362 18.0042 99.3822 18.8687 99.7052 19.9707L97.9097 20.6547C97.6817 19.7807 97.2542 19.1442 96.6272 18.7452C96.0192 18.3272 95.2402 18.1182 94.2902 18.1182C93.4732 18.1182 92.7987 18.2987 92.2667 18.6597C91.7537 19.0017 91.4972 19.4862 91.4972 20.1132C91.4972 20.5882 91.6492 20.9777 91.9532 21.2817C92.2572 21.5857 92.6277 21.8232 93.0647 21.9942C93.5207 22.1462 94.1572 22.3172 94.9742 22.5072C96.0382 22.7922 96.8932 23.0677 97.5392 23.3337C98.2042 23.5997 98.7742 24.0177 99.2492 24.5877C99.7242 25.1577 99.9617 25.9367 99.9617 26.9247C99.9617 27.7607 99.7337 28.5112 99.2777 29.1762C98.8217 29.8222 98.1852 30.3257 97.3682 30.6867C96.5512 31.0477 95.6392 31.2282 94.6322 31.2282Z" />
      <path d="M80.2275 16.6362H82.1655V19.6572C82.5645 18.6312 83.163 17.8332 83.961 17.2632C84.778 16.6932 85.709 16.4082 86.754 16.4082C87.495 16.4082 88.084 16.5127 88.521 16.7217L88.407 18.5742C87.875 18.3652 87.2575 18.2607 86.5545 18.2607C85.6995 18.2607 84.9395 18.5362 84.2745 19.0872C83.6285 19.6382 83.1155 20.4362 82.7355 21.4812C82.3555 22.5262 82.1655 23.7707 82.1655 25.2147V31.0002H80.2275V16.6362Z" />
      <path d="M70.9133 31.2282C69.5453 31.2282 68.3293 30.9147 67.2653 30.2877C66.2203 29.6607 65.3938 28.7867 64.7858 27.6657C64.1968 26.5257 63.9023 25.2432 63.9023 23.8182C63.9023 22.3932 64.1968 21.1202 64.7858 19.9992C65.3748 18.8782 66.2013 18.0042 67.2653 17.3772C68.3293 16.7312 69.5263 16.4082 70.8563 16.4082C72.2433 16.4082 73.4593 16.7407 74.5043 17.4057C75.5493 18.0707 76.3188 18.9732 76.8128 20.1132C77.3068 21.2532 77.4778 22.5167 77.3258 23.9037H65.0138V22.3077H75.3308C75.3308 21.4717 75.1408 20.7402 74.7608 20.1132C74.3808 19.4862 73.8488 19.0017 73.1648 18.6597C72.4998 18.2987 71.7303 18.1182 70.8563 18.1182C69.8873 18.1182 69.0228 18.3462 68.2628 18.8022C67.5218 19.2582 66.9423 19.9137 66.5243 20.7687C66.1063 21.6237 65.8973 22.6212 65.8973 23.7612C65.8973 24.8822 66.1063 25.8797 66.5243 26.7537C66.9423 27.6087 67.5313 28.2832 68.2913 28.7772C69.0703 29.2712 69.9443 29.5182 70.9133 29.5182C72.0343 29.5182 73.0128 29.2237 73.8488 28.6347C74.7038 28.0267 75.2263 27.2762 75.4163 26.3832L77.2118 26.8392C77.0028 27.6942 76.6038 28.4542 76.0148 29.1192C75.4258 29.7842 74.6848 30.3067 73.7918 30.6867C72.9178 31.0477 71.9583 31.2282 70.9133 31.2282Z" />
      <path d="M53.7781 31.2278C52.3721 31.2278 51.1276 30.9238 50.0446 30.3158C48.9806 29.6888 48.1541 28.8148 47.5651 27.6938C46.9761 26.5728 46.6816 25.2808 46.6816 23.8178C46.6816 22.3548 46.9761 21.0628 47.5651 19.9418C48.1541 18.8208 48.9806 17.9563 50.0446 17.3483C51.1276 16.7213 52.3721 16.4078 53.7781 16.4078C54.9181 16.4078 55.9726 16.6833 56.9416 17.2343C57.9296 17.7663 58.6421 18.4788 59.0791 19.3718V10.8218H61.0456V30.9998H59.0791V28.2353C58.6421 29.1283 57.9296 29.8503 56.9416 30.4013C55.9726 30.9523 54.9181 31.2278 53.7781 31.2278ZM53.8636 29.5178C54.8706 29.5178 55.7636 29.2708 56.5426 28.7768C57.3406 28.2828 57.9581 27.6083 58.3951 26.7533C58.8511 25.8983 59.0791 24.9198 59.0791 23.8178C59.0791 22.7158 58.8511 21.7373 58.3951 20.8823C57.9581 20.0083 57.3406 19.3338 56.5426 18.8588C55.7636 18.3648 54.8706 18.1178 53.8636 18.1178C52.8756 18.1178 51.9826 18.3648 51.1846 18.8588C50.4056 19.3338 49.7881 20.0083 49.3321 20.8823C48.8951 21.7373 48.6766 22.7158 48.6766 23.8178C48.6766 24.9198 48.8951 25.9078 49.3321 26.7818C49.7881 27.6368 50.4056 28.3113 51.1846 28.8053C51.9826 29.2803 52.8756 29.5178 53.8636 29.5178Z" />
      <path d="M36.5565 31.2282C35.1505 31.2282 33.906 30.9242 32.823 30.3162C31.759 29.6892 30.9325 28.8152 30.3435 27.6942C29.7545 26.5732 29.46 25.2812 29.46 23.8182C29.46 22.3552 29.7545 21.0632 30.3435 19.9422C30.9325 18.8212 31.759 17.9567 32.823 17.3487C33.906 16.7217 35.1505 16.4082 36.5565 16.4082C37.6965 16.4082 38.751 16.6837 39.72 17.2347C40.708 17.7667 41.4205 18.4792 41.8575 19.3722V16.6362H43.824V31.0002H41.8575V28.2357C41.4205 29.1287 40.708 29.8507 39.72 30.4017C38.751 30.9527 37.6965 31.2282 36.5565 31.2282ZM36.642 29.5182C37.649 29.5182 38.542 29.2712 39.321 28.7772C40.119 28.2832 40.7365 27.6087 41.1735 26.7537C41.6295 25.8987 41.8575 24.9202 41.8575 23.8182C41.8575 22.7162 41.6295 21.7377 41.1735 20.8827C40.7365 20.0087 40.119 19.3342 39.321 18.8592C38.542 18.3652 37.649 18.1182 36.642 18.1182C35.654 18.1182 34.761 18.3652 33.963 18.8592C33.184 19.3342 32.5665 20.0087 32.1105 20.8827C31.6735 21.7377 31.455 22.7162 31.455 23.8182C31.455 24.9202 31.6735 25.9082 32.1105 26.7822C32.5665 27.6372 33.184 28.3117 33.963 28.8057C34.761 29.2807 35.654 29.5182 36.642 29.5182Z" />
      <path d="M14.1807 10.8218H16.1187V19.6568C16.5937 18.7068 17.2967 17.9278 18.2277 17.3198C19.1777 16.7118 20.2702 16.4078 21.5052 16.4078C22.5122 16.4078 23.4052 16.6168 24.1842 17.0348C24.9822 17.4338 25.6092 18.0228 26.0652 18.8018C26.5212 19.5618 26.7492 20.4833 26.7492 21.5663V30.9998H24.7827V21.9653C24.7827 21.1293 24.6307 20.4358 24.3267 19.8848C24.0417 19.3148 23.6237 18.8873 23.0727 18.6023C22.5407 18.2983 21.9137 18.1463 21.1917 18.1463C20.1657 18.1463 19.2727 18.4218 18.5127 18.9728C17.7527 19.5238 17.1637 20.3123 16.7457 21.3383C16.3277 22.3453 16.1187 23.5233 16.1187 24.8723V30.9998H14.1807V10.8218Z" />
      <path d="M6.05503 31.2282C5.02903 31.2282 4.10753 31.0572 3.29053 30.7152C2.49253 30.3542 1.83703 29.8602 1.32403 29.2332C0.811031 28.5872 0.459531 27.8367 0.269531 26.9817L2.06503 26.4402C2.27403 27.4282 2.71103 28.1882 3.37603 28.7202C4.06003 29.2522 4.95303 29.5182 6.05503 29.5182C7.06203 29.5182 7.86953 29.2997 8.47753 28.8627C9.08553 28.4067 9.38953 27.7702 9.38953 26.9532C9.38953 26.4022 9.21853 25.9557 8.87653 25.6137C8.55353 25.2717 8.14503 25.0057 7.65103 24.8157C7.15703 24.6257 6.49203 24.4167 5.65603 24.1887C4.64903 23.9417 3.83203 23.6947 3.20503 23.4477C2.59703 23.1817 2.07453 22.7922 1.63753 22.2792C1.20053 21.7662 0.982031 21.0727 0.982031 20.1987C0.982031 19.4767 1.18153 18.8307 1.58053 18.2607C1.97953 17.6717 2.54003 17.2157 3.26203 16.8927C3.98403 16.5697 4.80103 16.4082 5.71303 16.4082C7.08103 16.4082 8.24003 16.7312 9.19003 17.3772C10.159 18.0042 10.805 18.8687 11.128 19.9707L9.33253 20.6547C9.10453 19.7807 8.67703 19.1442 8.05003 18.7452C7.44203 18.3272 6.66303 18.1182 5.71303 18.1182C4.89603 18.1182 4.22153 18.2987 3.68953 18.6597C3.17653 19.0017 2.92003 19.4862 2.92003 20.1132C2.92003 20.5882 3.07203 20.9777 3.37603 21.2817C3.68003 21.5857 4.05053 21.8232 4.48753 21.9942C4.94353 22.1462 5.58003 22.3172 6.39703 22.5072C7.46103 22.7922 8.31603 23.0677 8.96203 23.3337C9.62703 23.5997 10.197 24.0177 10.672 24.5877C11.147 25.1577 11.3845 25.9367 11.3845 26.9247C11.3845 27.7607 11.1565 28.5112 10.7005 29.1762C10.2445 29.8222 9.60803 30.3257 8.79103 30.6867C7.97403 31.0477 7.06203 31.2282 6.05503 31.2282Z" />
    </svg>
  );
}
